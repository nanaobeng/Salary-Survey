<html>
<head>
    <meta charset="utf-8">
 <title>Python Flask Jquery Ajax Autocomplete</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
  </head>
<body>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<h1>Python Flask Jquery Ajax Autocomplete using SQLAlchemy database</h1>
<form  autocomplete="off" class="form-inline">
 <div class="form-group">
     {{form.country(class="form-control")}}
   </div>
   <button type="submit" class="btn btn-info">Submit</button>
</form>
<div id="result"></div>

<script>
  $("#country").on('input', function(){

    

//localStorage.setItem('editId',$(elm).attr('data-id'));



$.ajax({

  url: '/countries',

  data: {

     id: $(this).val()

  },

  type: 'POST',

  success: function(res) {

    
$('#result').empty()
     for(var loop =0 ; loop<res.length; loop++){
    
         $('#result').append(JSON.stringify(res[loop].job_title))
     }

  },

  error: function(error) {

      console.log(error);

  }

});

  });
</script>
<script>
// $(document).ready(function(){
//  var countries=[];
//  function loadCountries(){
//   $.getJSON('/countries', function(data, status, xhr){
//    for (var i = 0; i < data.length; i++ ) {
//     countries.push(data[i].name);
//    }
//  });
//  };
//  loadCountries();
 
//  $('#country').autocomplete({
//   source: countries, 
//  }); 
 
//  $('form').on('submit', function(e){
//   $.ajax({
//    data: {
//     country:$('#country').val()
//    },
//    type: 'POST',
//    url : '/process'
//   })
//   .done(function(data){ 
//    if (data.error){
//     $('#result').text(data.error).show();
//    }
//    else {
//     $('#result').html(data.country).show()
//    }
//   })
//   e.preventDefault();
//  });
// }); 
</script>
<style>
.form-control {
    display: block;
    width:300px;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    color: #495057;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
.btn {padding: .375rem .75rem; margin-top:10px;}
</style>
  </body>
</html>